<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ƒêƒÉng k√Ω t√†i kho·∫£n - Florio Flower Shop</title>

<!-- Bootstrap CSS -->
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
	rel="stylesheet">
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
	rel="stylesheet">

<style>
body {
	background: linear-gradient(135deg, #fce4ec, #f8bbd0);
	font-family: "Segoe UI", sans-serif;
}

.register-card {
	max-width: 480px;
	margin: 70px auto;
	border-radius: 15px;
	box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
}

.register-header {
	text-align: center;
	padding: 20px 0 10px;
}

.register-header h4 {
	font-weight: 700;
	color: #d81b60;
}

.btn-primary {
	background-color: #d81b60;
	border: none;
}

.btn-primary:hover {
	background-color: #ad1457;
}

.form-control:focus {
	box-shadow: none;
	border-color: #d81b60;
}

a {
	text-decoration: none;
	color: #d81b60;
}

a:hover {
	text-decoration: underline;
}
</style>
</head>
<body>

	<!-- Header -->
	<div id="header-placeholder"></div>

	<!-- N·ªôi dung ƒëƒÉng k√Ω -->
	<div class="container">
		<div class="card register-card p-4 bg-white">
			<div class="register-header">
				<i class="bi bi-flower3" style="font-size: 2rem; color: #d81b60;"></i>
				<h4>ƒêƒÉng k√Ω t√†i kho·∫£n Florio Flower Shop</h4>
				<p class="text-muted small">T·∫°o t√†i kho·∫£n ƒë·ªÉ b·∫Øt ƒë·∫ßu mua s·∫Øm üíê</p>
			</div>
			<!-- Hi·ªÉn th·ªã th√¥ng b√°o l·ªói -->
			<div th:if="${error}" class="alert alert-danger text-center py-2"
				th:text="${error}"></div>

			<!-- Hi·ªÉn th·ªã th√¥ng b√°o th√†nh c√¥ng -->
			<div th:if="${success}" class="alert alert-success text-center py-2"
				th:text="${success}"></div>

			<!-- Hi·ªÉn th·ªã th√¥ng b√°o chung -->
			<div th:if="${message}" class="alert alert-info text-center py-2"
				th:text="${message}"></div>


			<form th:action="@{/auth/register}" method="post"
				th:object="${account}">
				<div th:if="${error}" class="alert alert-danger text-center py-2"
					th:text="${error}"></div>

				<div class="mb-3">
					<label for="fullname" class="form-label">H·ªç v√† t√™n</label> <input
						type="text" class="form-control" id="fullname"
						th:field="*{fullName}" placeholder="Nh·∫≠p h·ªç t√™n" required>
				</div>

				<div class="mb-3">
					<label for="email" class="form-label">ƒê·ªãa ch·ªâ email</label> <input
						type="email" class="form-control" id="email" th:field="*{email}"
						placeholder="Nh·∫≠p email" required>
				</div>

				<div class="mb-3">
					<label for="phone" class="form-label">S·ªë ƒëi·ªán tho·∫°i</label> <input
						type="tel" class="form-control" id="phone"
						th:field="*{phoneNumber}" placeholder="Nh·∫≠p s·ªë ƒëi·ªán tho·∫°i">
				</div>

				<div class="mb-3">
					<label for="address" class="form-label">ƒê·ªãa ch·ªâ</label> <input
						type="text" class="form-control" id="address"
						th:field="*{address}" placeholder="Nh·∫≠p ƒë·ªãa ch·ªâ">
				</div>

				<div class="mb-3">
					<label for="password" class="form-label">M·∫≠t kh·∫©u</label> <input
						type="password" class="form-control" id="password"
						th:field="*{password}" placeholder="Nh·∫≠p m·∫≠t kh·∫©u" required>
				</div>
				<div class="mb-3">
					<label for="confirm-password" class="form-label">X√°c nh·∫≠n
						m·∫≠t kh·∫©u</label> <input type="password" class="form-control"
						id="confirm-password" placeholder="Nh·∫≠p l·∫°i m·∫≠t kh·∫©u" required>
				</div>

				<div class="form-check mb-3">
					<input class="form-check-input" type="checkbox" id="agree" required>
					<label class="form-check-label small text-muted" for="agree">
						T√¥i ƒë·ªìng √Ω v·ªõi <a href="#">ƒëi·ªÅu kho·∫£n & ch√≠nh s√°ch b·∫£o m·∫≠t</a>
					</label>
				</div>

				<div class="d-grid">
					<button type="submit" class="btn btn-primary">ƒêƒÉng k√Ω</button>
				</div>
			</form>

			<script>
				document
						.getElementById("registerForm")
						.addEventListener(
								"submit",
								function(e) {
									e.preventDefault(); // NgƒÉn form g·ª≠i ƒëi theo c√°ch truy·ªÅn th·ªëng

									const email = document
											.getElementById("email").value
											.trim();
									const fullname = document
											.getElementById("fullname").value
											.trim();
									const password = document
											.getElementById("password").value
											.trim();
									const confirm = document
											.getElementById("confirm-password").value
											.trim();

									// Ki·ªÉm tra c√°c tr∆∞·ªùng c√≥ tr·ªëng kh√¥ng
									if (!email || !fullname || !password
											|| !confirm) {
										alert("Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin!");
										return;
									}

									// Ki·ªÉm tra m·∫≠t kh·∫©u c√≥ kh·ªõp kh√¥ng
									if (password !== confirm) {
										alert("M·∫≠t kh·∫©u x√°c nh·∫≠n kh√¥ng kh·ªõp!");
										return;
									}

									// Gi·∫£ l·∫≠p t·∫°o m√£ OTP ng·∫´u nhi√™n g·ªìm 6 ch·ªØ s·ªë
									const otp = Math.floor(
											100000 + Math.random() * 900000)
											.toString();

									// L∆∞u th√¥ng tin ng∆∞·ªùi d√πng ƒëang ch·ªù x√°c th·ª±c v√† m√£ OTP v√†o localStorage
									const pendingUserData = {
										fullname : fullname,
										email : email,
										password : password, // Trong th·ª±c t·∫ø, b·∫°n n√™n m√£ h√≥a m·∫≠t kh·∫©u tr∆∞·ªõc khi g·ª≠i ƒëi
										otp : otp
									};
									localStorage.setItem("pendingUser", JSON
											.stringify(pendingUserData));

									// X√≥a th√¥ng tin reset password c≈© n·∫øu c√≥ ƒë·ªÉ tr√°nh xung ƒë·ªôt
									localStorage.removeItem("resetEmail");

									// Th√¥ng b√°o cho ng∆∞·ªùi d√πng (trong th·ª±c t·∫ø, backend s·∫Ω g·ª≠i email th·∫≠t)
									alert("M√£ OTP ƒë√£ ƒë∆∞·ª£c g·ª≠i ƒë·∫øn email: "
											+ email + "\n(M√£ OTP c·ªßa b·∫°n l√†: "
											+ otp + ")");

									// Chuy·ªÉn h∆∞·ªõng sang trang nh·∫≠p OTP
									window.location.href = "otp.html";
								});
			</script>

			<hr>

			<p class="text-center small">
				ƒê√£ c√≥ t√†i kho·∫£n? <a href="login.html">ƒêƒÉng nh·∫≠p ngay</a>
			</p>
		</div>
	</div>

	<!-- Footer -->
	<div id="footer-placeholder"></div>

</body>

</html>