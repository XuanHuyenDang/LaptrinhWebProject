<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>S·∫£n ph·∫©m - Florio Flower Shop</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

  <style>
    body {
      background-color: #fff7fa;
      font-family: "Segoe UI", sans-serif;
    }

    h6.card-title {
      color: #6b184e;
      font-weight: 600;
    }

    .card {
      border: none;
      border-radius: 15px;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .card:hover {
      transform: translateY(-4px);
      box-shadow: 0 6px 15px rgba(201, 70, 125, 0.2);
    }

    .btn-primary {
      background-color: #c9467d;
      border-color: #c9467d;
    }

    .btn-primary:hover {
      background-color: #b53567;
      border-color: #b53567;
    }

    .btn-outline-primary {
      color: #c9467d;
      border-color: #c9467d;
    }

    .btn-outline-primary:hover {
      background-color: #c9467d;
      color: white;
    }

    .form-control:focus, .form-select:focus {
      border-color: #c9467d;
      box-shadow: 0 0 0 0.2rem rgba(201, 70, 125, 0.25);
    }

    .card-body p.text-danger {
      color: #b53567 !important;
    }

    .card.shadow-sm.mb-4 {
      border-left: 5px solid #c9467d;
    }

    .text-muted {
      color: #999 !important;
    }
  </style>
</head>

<body>
  <!-- HEADER -->
  <div id="header"></div>

  <!-- MAIN -->
  <main class="container my-4">

    <!-- B·ªô l·ªçc s·∫£n ph·∫©m -->
    <div class="card shadow-sm mb-4">
      <div class="card-body">
        <div class="row g-3 align-items-center">
          <div class="col-md-4">
            <input type="text" id="searchName" class="form-control" placeholder="üîç T√¨m theo t√™n s·∫£n ph·∫©m...">
          </div>
          <div class="col-md-3">
            <select id="categoryFilter" class="form-select">
              <option value="">T·∫•t c·∫£ danh m·ª•c</option>
              <option value="bohoa">B√≥ hoa</option>
              <option value="giohoa">Gi·ªè hoa</option>
              <option value="chauhoa">Ch·∫≠u hoa</option>
            </select>
          </div>
          <div class="col-md-3 d-flex align-items-center">
            <input type="number" id="minPrice" class="form-control me-2" placeholder="Gi√° t·ª´">
            <input type="number" id="maxPrice" class="form-control" placeholder="ƒê·∫øn">
          </div>
          <div class="col-md-2">
            <select id="sortOption" class="form-select">
              <option value="">S·∫Øp x·∫øp theo...</option>
              <option value="popular">Ph·ªï bi·∫øn</option>
              <option value="banchay">B√°n ch·∫°y</option>
              <option value="asc">Gi√° tƒÉng d·∫ßn</option>
              <option value="desc">Gi√° gi·∫£m d·∫ßn</option>
            </select>
          </div>
        </div>
      </div>
    </div>

    <!-- Danh s√°ch s·∫£n ph·∫©m -->
    <div class="row" id="productList"></div>

  </main>

  <!-- FOOTER -->
  <div id="footer"></div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    const products = [
      // --- B√ì HOA ---
      {id: 1, name: "B√≥ Hoa H·ªìng ƒê·ªè", price: 350000, category: "bohoa", img: "rose1.jpg", tag: "banchay"},
      {id: 2, name: "B√≥ Hoa H·ªìng T√≠m", price: 370000, category: "bohoa", img: "rose2.jpg", tag: "moi"},
      {id: 3, name: "B√≥ Hoa C·∫©m Ch∆∞·ªõng", price: 320000, category: "bohoa", img: "camchuong.jpg"},
      {id: 4, name: "B√≥ Hoa H∆∞·ªõng D∆∞∆°ng", price: 290000, category: "bohoa", img: "huongduong.jpg", tag: "khuyenmai"},
      {id: 5, name: "B√≥ Hoa Baby Tr·∫Øng", price: 310000, category: "bohoa", img: "baby.jpg"},

      // --- GI·ªé HOA ---
      {id: 6, name: "Gi·ªè Hoa H·ªìng Sen", price: 450000, category: "giohoa", img: "gio1.jpg", tag: "banchay"},
      {id: 7, name: "Gi·ªè Hoa Lan H·ªì ƒêi·ªáp", price: 480000, category: "giohoa", img: "gio2.jpg"},
      {id: 8, name: "Gi·ªè Hoa Tulip ƒê·ªè", price: 500000, category: "giohoa", img: "gio3.jpg"},
      {id: 9, name: "Gi·ªè Hoa Mix M√†u", price: 460000, category: "giohoa", img: "gio4.jpg", tag: "moi"},
      {id: 10, name: "Gi·ªè Hoa H·ªìng Pastel", price: 440000, category: "giohoa", img: "gio5.jpg", tag: "khuyenmai"},

      // --- CH·∫¨U HOA ---
      {id: 11, name: "Ch·∫≠u Hoa Lan T√≠m", price: 600000, category: "chauhoa", img: "chau1.jpg"},
      {id: 12, name: "Ch·∫≠u Hoa C√∫c V√†ng", price: 350000, category: "chauhoa", img: "chau2.jpg", tag: "moi"},
      {id: 13, name: "Ch·∫≠u Hoa H·ªìng Leo", price: 520000, category: "chauhoa", img: "chau3.jpg", tag: "banchay"},
      {id: 14, name: "Ch·∫≠u Hoa Lavender", price: 480000, category: "chauhoa", img: "chau4.jpg"},
      {id: 15, name: "Ch·∫≠u Hoa Sen ƒê√°", price: 260000, category: "chauhoa", img: "chau5.jpg", tag: "khuyenmai"}
    ];

    const productList = document.getElementById("productList");

    function renderProducts(list) {
      productList.innerHTML = "";
      if (list.length === 0) {
        productList.innerHTML = `<p class="text-center text-muted">Kh√¥ng t√¨m th·∫•y s·∫£n ph·∫©m ph√π h·ª£p.</p>`;
        return;
      }

      list.forEach(p => {
        const card = `
          <div class="col-6 col-md-3 mb-4">
            <div class="card h-100 shadow-sm">
              <img src="assets/images/${p.img}" class="card-img-top" alt="${p.name}">
              <div class="card-body d-flex flex-column">
                <h6 class="card-title">${p.name}</h6>
                <p class="card-text text-danger fw-bold">${p.price.toLocaleString()} ‚Ç´</p>
                <div class="mt-auto d-grid gap-2">
                  <a href="product-detail.html?id=${p.id}" class="btn btn-outline-primary btn-sm">
                    <i class="bi bi-eye"></i> Xem chi ti·∫øt
                  </a>
                  <button class="btn btn-primary btn-sm add-to-cart"
                          data-id="${p.id}" data-name="${p.name}" data-price="${p.price}">
                    <i class="bi bi-cart-plus"></i> Th√™m v√†o gi·ªè
                  </button>
                </div>
              </div>
            </div>
          </div>`;
        productList.insertAdjacentHTML("beforeend", card);
      });

      document.querySelectorAll(".add-to-cart").forEach(btn => {
        btn.addEventListener("click", addToCart);
      });
    }

    function addToCart(e) {
      const btn = e.currentTarget;
      const id = btn.dataset.id;
      const name = btn.dataset.name;
      const price = parseInt(btn.dataset.price);

      let cart = JSON.parse(localStorage.getItem("cart")) || [];
      const existing = cart.find(item => item.id == id);
      if (existing) existing.qty += 1;
      else cart.push({id, name, price, qty: 1});

      localStorage.setItem("cart", JSON.stringify(cart));
      alert(`üõí ƒê√£ th√™m "${name}" v√†o gi·ªè h√†ng!`);
    }

    function filterProducts() {
      let name = document.getElementById("searchName").value.toLowerCase();
      let category = document.getElementById("categoryFilter").value;
      let min = parseInt(document.getElementById("minPrice").value) || 0;
      let max = parseInt(document.getElementById("maxPrice").value) || Infinity;
      let sort = document.getElementById("sortOption").value;

      let filtered = products.filter(p =>
        p.name.toLowerCase().includes(name) &&
        (!category || p.category === category) &&
        p.price >= min && p.price <= max
      );

      switch (sort) {
        case "asc": filtered.sort((a,b) => a.price - b.price); break;
        case "desc": filtered.sort((a,b) => b.price - a.price); break;
        case "banchay": filtered = filtered.filter(p => p.tag === "banchay"); break;
        case "popular": filtered = filtered.filter(p => p.tag === "banchay" || p.tag === "moi"); break;
      }

      renderProducts(filtered);
    }

    document.querySelectorAll("#searchName, #categoryFilter, #minPrice, #maxPrice, #sortOption")
      .forEach(el => el.addEventListener("input", filterProducts));

    renderProducts(products);

    async function loadHTML(id, file) {
      try {
        const res = await fetch(file);
        if (!res.ok) throw new Error("Kh√¥ng th·ªÉ t·∫£i " + file);
        document.getElementById(id).innerHTML = await res.text();
      } catch (err) {
        console.error(err);
      }
    }
    loadHTML("header", "header.html");
    loadHTML("footer", "footer.html");
  </script>
</body>
</html>
