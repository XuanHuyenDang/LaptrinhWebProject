<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Duyệt Yêu cầu Trả hàng - Florio Admin</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
<style>
/* (Copy style từ các trang admin khác, ví dụ: admin-orders.html) */
body { background-color: #fffafc; font-family: "Segoe UI", sans-serif; }
.sidebar { position: fixed; top: 0; left: 0; height: 100vh; width: 250px; background: linear-gradient(180deg, #ffb6c1 0%, #ffe5ec 100%); color: #4a4a4a; padding-top: 1rem; box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1); }
.sidebar h5 { font-weight: bold; color: #c2185b; }
.sidebar a { color: #5a5a5a; text-decoration: none; display: block; padding: 10px 20px; border-radius: 8px; margin: 3px 10px; transition: all 0.3s ease; font-weight: 500; }
.sidebar a:hover, .sidebar a.active { background: #fff; color: #c2185b; box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15); transform: translateX(3px); }
.sidebar i { color: #c2185b; }
main { margin-left: 270px; padding: 30px; }
.card { border-radius: 15px; border: none; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08); }
.table { border-radius: 10px; overflow: hidden; }
h3 { color: #c2185b; font-weight: 700; }
.logout-form {
  position: absolute;
  bottom: 90px;        /* Cố định ở gần cuối sidebar */
  left: 45%;
  transform: translateX(-50%); /* Căn giữa theo chiều ngang */
  text-align: center;
}
</style>
</head>
<body>

	<div th:replace="~{admin/fragments/sidebar :: sidebar(page='returns')}"></div>

	<main>
		<h3 class="mb-4"><i class="bi bi-arrow-return-left me-2"></i>Duyệt Yêu cầu Trả hàng</h3>

        <div th:if="${success}" class="alert alert-success" th:text="${success}"></div>
		<div th:if="${error}" class="alert alert-danger" th:text="${error}"></div>

		<div class="card p-0">
			<div class="card-body p-0">
                <table class="table table-bordered bg-white align-middle m-0">
                    <thead class="text-center table-light">
                        <tr>
                            <th style="width: 10%">Mã Yêu Cầu</th>
                            <th style="width: 10%">Mã Đơn Hàng</th>
                            <th style="width: 15%">Khách hàng</th>
                            <th style="width: 15%">Ngày Yêu Cầu</th>
                            <th style="width: 40%">Lý do</th>
                            <th style="width: 10%">Thao tác</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:if="${#lists.isEmpty(pendingRequests)}">
                            <td colspan="6" class="text-center text-muted p-4">
                                <i class="bi bi-check2-circle fs-4"></i>
                                <p class="mb-0 mt-2">Không có yêu cầu nào đang chờ xử lý.</p>
                            </td>
                        </tr>
                        <tr th:each="req : ${pendingRequests}">
                            <td class="text-center" th:text="'#RT' + ${req.id}"></td>
                            <td class="text-center" th:text="'#' + ${req.order.id}"></td>
                            <td th:text="${req.order.recipientName}"></td>
                            <td class="text-center" th:text="${#temporals.format(req.requestDate, 'dd/MM/yyyy HH:mm')}"></td>
                            <td class="text-truncate" style="max-width: 200px;" th:text="${req.reason}"></td>
                            <td class="text-center">
                                <a th:href="@{/admin/returns/{id}(id=${req.id})}" class="btn btn-sm btn-outline-primary">
                                    <i class="bi bi-eye"></i> Xem
                                </a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
		</div>
	</main>

</body>
</html>