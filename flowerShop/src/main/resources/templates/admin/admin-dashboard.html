<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Admin Dashboard - Florio Flower Shop</title>
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
	rel="stylesheet">
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
	rel="stylesheet">
<style>
body {
	background-color: #fffafc;
	font-family: "Segoe UI", sans-serif;
}

/* Sidebar */
.sidebar {
	position: fixed;
	top: 0;
	left: 0;
	height: 100vh;
	width: 250px;
	background: linear-gradient(180deg, #ffb6c1 0%, #ffe5ec 100%);
	color: #4a4a4a;
	padding-top: 1rem;
	box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
}

.sidebar h5 {
	font-weight: bold;
	color: #c2185b;
}

.sidebar a {
	color: #5a5a5a;
	text-decoration: none;
	display: block;
	padding: 10px 20px;
	border-radius: 8px;
	margin: 3px 10px;
	transition: all 0.3s ease;
	font-weight: 500;
}

.sidebar a:hover, .sidebar a.active {
	background: #fff;
	color: #c2185b;
	box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
	transform: translateX(3px);
}

.sidebar i {
	color: #c2185b;
}

main {
	margin-left: 270px;
	padding: 30px;
}

/* Cards */
.card {
	border-radius: 15px;
	border: none;
	box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
	transition: transform 0.2s ease;
}

.card:hover {
	transform: translateY(-4px);
}

.card i {
	font-size: 2rem;
	margin-bottom: 10px;
}

.table {
	border-radius: 10px;
	overflow: hidden;
}

h3 {
	color: #c2185b;
	font-weight: 700;
}

.badge {
	font-size: 0.85rem;
}
.logout-form {
  position: absolute;
  bottom: 160px;        /* Cố định ở gần cuối sidebar */
  left: 45%;
  transform: translateX(-50%); /* Căn giữa theo chiều ngang */
  text-align: center;
}

</style>
</head>
<body>

	<!-- Sidebar -->
	<div th:replace="~{admin/fragments/sidebar :: sidebar(page='dashboard')}"></div>
	<!-- Main -->
	<main>
		<h3 class="mb-4">
			<i class="bi bi-speedometer2 me-2"></i>Tổng quan
		</h3>

		<div class="row g-4">
			<div class="col-md-4">
				<a th:href="@{/admin/orders}" style="text-decoration: none;">
					<div class="card text-center p-3 bg-light">
						<i class="bi bi-cart4 text-danger"></i>
						<h5 class="mt-2 text-dark">Đơn hàng</h5>
						<p class="fw-bold fs-5 text-danger mb-0" th:text="${totalOrders}">0</p>
					</div>
				</a>
			</div>

			<div class="col-md-4">
				<a th:href="@{/admin/customers}" style="text-decoration: none;">
					<div class="card text-center p-3 bg-light">
						<i class="bi bi-people text-success"></i>
						<h5 class="mt-2 text-dark">Khách hàng</h5>
						<p class="fw-bold fs-5 text-success mb-0"
							th:text="${totalCustomers}">0</p>
					</div>
				</a>
			</div>

			<div class="col-md-4">
				<a th:href="@{/admin/comments}" style="text-decoration: none;">
					<div class="card text-center p-3 bg-light">
						<i class="bi bi-chat-left-text text-info"></i>
						<h5 class="mt-2 text-dark">Bình luận</h5>
						<p class="fw-bold fs-5 text-info mb-0" th:text="${totalComments}">0</p>
					</div>
				</a>
			</div>
		</div>


		<div class="mt-5">
			<h5 class="fw-bold text-secondary mb-3">
				<i class="bi bi-basket2 me-2"></i>Đơn hàng mới
			</h5>
			<table class="table table-bordered bg-white align-middle">
				<thead class="table-pink text-center">
					<tr class="table-light">
						<th>Mã đơn</th>
						<th>Khách hàng</th>
						<th>Sản phẩm</th>
						<th>Thời gian</th>
						<th>Tổng tiền</th>
						<th>Trạng thái</th>
					</tr>
				</thead>
				<tbody>
					<tr th:each="order : ${latestOrders}">
						<td th:text="${order.id}"></td>
						<td th:text="${order.account.fullName}"></td>
						<td>
							<ul class="mb-0">
								<li th:each="detail : ${order.details}"
									th:text="${detail.product.productName}"></li>
							</ul>
						</td>
						<td
							th:text="${#temporals.format(order.orderDate, 'dd/MM/yyyy HH:mm')}"></td>
						<td th:text="${order.totalAmount} + ' VND'"></td>
						<td><span th:switch="${order.status}"> <span
								th:case="'Đang xử lý'" class="badge bg-warning text-dark"
								th:text="${order.status}"></span> <span th:case="'Hoàn tất'"
								class="badge bg-success" th:text="${order.status}"></span> <span
								th:case="'Đã hủy'" class="badge bg-danger"
								th:text="${order.status}"></span> <span th:case="*"
								class="badge bg-secondary" th:text="${order.status}"></span>
						</span></td>

					</tr>


				</tbody>

			</table>
		</div>
	</main>

</body>
</html>
